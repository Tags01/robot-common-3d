<launch>
    <!--
        Pointcloud is published to the topic: visualization_voxel_grid_filter

        Must launch camera with depth output enabled before this node and
        specify the ros arg `-\-ros-args pointcloud_topic:=<topic>`
        example:

        ```
        ros2 launch pcl_filter_3d_utilities test_voxel_grid_filter_service.xml
        pointcloud_topic:=camera/camera/depth/color/points
        ```
    -->

    <arg name="pointcloud_topic" />
    <node
        pkg="pcl_filter_3d_utilities"
        exec="pcl_voxel_grid_filter_service"
        name="pcl_voxel_grid_filter_service"
    >
        <param name="filters.voxel_grid.leaf_size_x" value="0.05" />
        <param name="filters.voxel_grid.leaf_size_y" value="0.05" />
        <param name="filters.voxel_grid.leaf_size_z" value="0.05" />
    </node>
    <node
        pkg="pcl_filter_3d_utilities"
        exec="visualizer_pcl_voxel_grid_filter_service"
        name="visualizer_pcl_voxel_grid_filter_service"
    >
        <param name="pointcloud_topic" value="$(var pointcloud_topic)" />
    </node>
</launch>